<!DOCTYPE html>

<html>
	
	<head>
		<title>appex:reflection</title>
        	
	    <meta charset="utf-8" />
			
	    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8" />

        <link   type='text/css'        rel ="stylesheet" href="/appex/css/site">

        <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
        
        <script type="text/javascript" src="http://knockoutjs.com/downloads/knockout-2.2.1.js"></script>
        
        <script type="text/javascript" src="/appex/scripts/api"></script>

        <script type="text/javascript" src="/appex/reflection/script"></script>


		<style type="text/css">
		
			.page-header { margin-top : 50px; }

		</style>
        
        <!-- ----------------------------------------------------------------
        template.variable
        ------------------------------------------------------------------ -->

        <script type="text/html" id="template.variable">

            <a href="#" data-bind="text: text()" />

        </script>

        <!-- ----------------------------------------------------------------
        template.method
        ------------------------------------------------------------------ -->

        <script type="text/html" id="template.method">

             <a href=" " data-bind="text: text(), event:{click:toggle}" />

        </script>

        <!-- ----------------------------------------------------------------
        template.interface
        ------------------------------------------------------------------ -->

        <script type="text/html" id="template.interface">

            <a href="#" data-bind="text: text(), event:{click:toggle}" />

            <div data-bind="if:expanded">

                <ul data-bind="foreach:variables">

                    <li data-bind="template: {name:'template.variable', data:$data}" />

                </ul>

                <ul data-bind="foreach:methods">

                    <li data-bind="template: {name:'template.method', data:$data}" />

                </ul>

            </div>

        </script>
        
        <!-- ----------------------------------------------------------------
        template.class
        ------------------------------------------------------------------ -->
              
        <script type="text/html" id="template.class">

            <a href="#" data-bind="text: text(), event:{click:toggle}" />

            <div data-bind="if:expanded">

                <ul data-bind="foreach:variables">

                    <li data-bind="template: {name:'template.variable', data:$data}" />

                </ul>

                <ul data-bind="foreach:methods">

                    <li data-bind="template: {name:'template.method', data:$data}" />

                </ul>

            </div>

        </script>
        
        <!-- ----------------------------------------------------------------
        template.import
        ------------------------------------------------------------------ -->
        <script type="text/html" id="template.import">

            <a data-bind="{text:'import: ' + alias()}" href="#"></a>

        </script>

        <!-- ----------------------------------------------------------------
        template.module
        ------------------------------------------------------------------ -->
        <script type="text/html" id="template.module">

            <a href="#" data-bind="text: name(), event:{click:toggle}" />

            <div data-bind="if:expanded">

                <ul data-bind="foreach:imports">

                    <li data-bind="template:{name:'template.import', data:$data}" />

                </ul>
                <ul data-bind="foreach:modules">

                    <li data-bind="template:{name:'template.module', data:$data}" />

                </ul>
                <ul data-bind="foreach:methods">

                    <li data-bind="template:{name:'template.method', data:$data}" />

                </ul>
                <ul data-bind="foreach:variables">

                    <li data-bind="template:{name:'template.variable', data:$data}" />

                </ul>
                <ul data-bind="foreach:interfaces">

                    <li data-bind="template:{name:'template.interface', data:$data}" />

                </ul>

                <ul data-bind="foreach:classes">

                    <li data-bind="template:{name:'template.class', data:$data}" />

                </ul>

            </div>

        </script>

        <!-- ----------------------------------------------------------------
        template.script
        ------------------------------------------------------------------ -->
        <script type="text/html" id="template.script">

             <a href="#" data-bind="text: path(), event:{click:toggle}"></a>

             <div data-bind="if:expanded">

                <ul data-bind="foreach:modules">

                    <li data-bind="template:{name:'template.module', data:$data}" />

                </ul>
                <ul data-bind="foreach:methods">

                    <li data-bind="template:{name:'template.method', data:$data}" />

                </ul>

                <ul data-bind="foreach:variables">

                    <li data-bind="template:{name:'template.variable', data:$data}" />

                </ul>

                <ul data-bind="foreach:interfaces">

                    <li data-bind="template:{name:'template.interface', data:$data}" />

                </ul>

                <ul data-bind="foreach:classes">

                    <li data-bind="template:{name:'template.class', data:$data}" />

                </ul>

            </div>

        </script>
          
        <script type="text/javascript">

            var Model = function(data) 
            {
                this.reflection = new ReflectionModel(data);
            }

            function initialize() 
            {
                appex.get('/appex/reflection/reflect', function (data) {

                    var model = new Model(data);

                    ko.applyBindings(model);
                });
            }

            $(document).ready(initialize);

        </script>	

	</head>
	    
    <body>

	    <div class="navbar navbar-fixed-top">
				
	        <div class="navbar-inner">
	            
				<div class="container">

					<a href='/' class='brand'>appex client</a>
	                
					<div class="nav-collapse">
	                			
						<ul class="nav">
				
	                        <li><a href="/">dashboard</a></li>
				
	                    </ul>

	                </div>
			
	            </div>
			
	        </div>
			
	    </div>
			
	    <div class="container">
			
			<div class="page-header">
		
				<h3>appex:reflection</h3>
			
			</div>

			<div id='page-container'>
				
			    <div class="row">
			
                    <div class="span4">
		  
                        <ul data-bind="foreach: reflection.scripts"> 

                            <li data-bind="template:{name:'template.script', data:$data}" />

                        </ul>  	
		
                    </div>
		
                    <div class="span8">
						
                        <button class='btn' onclick="call()">call</button>

                        <input type="text" id="endpoint" class="input-medium search-query" />

                    </div>

                    <div class="span4">
                            
                        <li class="nav-header">input</li>

                        <textarea  id="input">"hello world"</textarea>

                    </div>

                    <div class="span4">

                        <li class="nav-header">output</li>

                        <textarea id="output"></textarea>

                    </div>
		
			    </div>
		
			</div>
			
		</div>        

             
    </body>
	
</html>
