/// <reference path="decl/references.ts" />
/// <reference path="ActivationContext.ts" />
/// <reference path="Runtime.ts" />

export function create_runtime(source:string, callback:(runtime:appex.Runtime)=>void) : void {
    
    var runtime = new appex.Runtime();

    runtime.start(source, (context, reflection) => {
        
        callback(runtime)
    });
}

export function create_activation_context(runtime:appex.Runtime, callback:(activation_context:appex.ActivationContext)=>void) : void {
    
    var activation_context = new appex.ActivationContext(runtime);

    callback(activation_context);
}

export function create_service_objects (activation_context:appex.ActivationContext) : void {

    activation_context.handles.forEach((handle)=> {
    
        var instance = handle.activate();
        
        console.log(handle.typename)

    });
}


 

